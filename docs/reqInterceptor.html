<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>reqInterceptor. bmproxy 1.0.9</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="index.html">bmproxy 1.0.9</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="reference.html">Reference</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


    <div class="container">
      <header>
        
      </header>
      
      <h1>Intercept request</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><span class="functioncall"><a href='reqInterceptor.html'>reqInterceptor</a></span><span class="keyword">(</span><span class="symbol">proxy</span><span class="keyword">,</span> <span class="symbol">jsFilter</span><span class="keyword">,</span> <span class="symbol">...</span><span class="keyword">)</span></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>proxy</dt>
      <dd>An object of class &quot;proxy&quot;. A proxy object see
<code><a href='proxy.html'>proxy</a></code>.</dd>
      <dt>jsFilter</dt>
      <dd>Javascript request filters have access to the variables 
request (type io.netty.handler.codec.http.HttpRequest), contents 
(type net.lightbody.bmp.util.HttpMessageContents), and messageInfo 
(type net.lightbody.bmp.util.HttpMessageInfo). messageInfo contains 
additional information about the message, including whether the 
message is sent over HTTP or HTTPS, as well as the original request 
received from the client before any changes made by previous 
filters. If the javascript returns an object of type 
io.netty.handler.codec.http.HttpResponse, the HTTP request will 
&quot;short-circuit&quot; and return the response immediately</dd>
      <dt>...</dt>
      <dd>Additonal function arguments</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
invisible(proxy): An object of class &quot;proxy&quot; is invisibly
   returned. A proxy object see <code><a href='proxy.html'>proxy</a></code>. This
   allows for chaining from this function to other functions that take
   such an object as an argument. See examples for further details.
</dl></p>

    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Executes the javascript against each request</p>

    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'><span class="comment">## Not run: ------------------------------------</span>
<span class="comment">#   library(httr)</span>
<span class="comment">#   library(xml2)</span>
<span class="comment">#   # A BMP server is assummed running on port 9090</span>
<span class="comment">#   prxy &lt;- proxy(bmpPort = 9090L, port = 39500L)</span>
<span class="comment">#   </span>
<span class="comment">#   # filter request</span>
<span class="comment">#   ua1 &lt;- GET("http://httpbin.org/user-agent", httr_proxy(prxy), </span>
<span class="comment">#              user_agent("httr"))</span>
<span class="comment">#   requestFilter &lt;- "request.headers().remove('User-Agent'); </span>
<span class="comment">#   request.headers().add('User-Agent', 'My-Custom-User-Agent-String 1.0');"</span>
<span class="comment">#   prxy %&gt;% reqInterceptor(requestFilter)</span>
<span class="comment">#   ua2 &lt;- GET("http://httpbin.org/user-agent", httr_proxy(prxy), </span>
<span class="comment">#              user_agent("httr"))</span>
<span class="comment">#   content(ua1)</span>
<span class="comment">#   content(ua2)</span>
<span class="comment">#   prxy %&gt;% closeProxy</span>
<span class="comment">#   </span>
<span class="comment">#   #filter response</span>
<span class="comment">#   prxy &lt;- proxy(bmpPort = 9090L, port = 39500L)</span>
<span class="comment">#   responseFilter &lt;- </span>
<span class="comment">#     "contents.setTextContents(</span>
<span class="comment">#       '&lt;html&gt;&lt;body&gt;Response successfully intercepted&lt;/body&gt;&lt;/html&gt;');"</span>
<span class="comment">#   prxy %&gt;% resInterceptor(responseFilter)</span>
<span class="comment">#   rproj &lt;- GET("http://r-project.org", httr_proxy(prxy)) </span>
<span class="comment">#   rproj %&gt;% read_html %&gt;% xml_find_all("//body") %&gt;% xml_text</span>
<span class="comment">## ---------------------------------------------</span></div></pre>
  </div>
  <div class="span4 sidebar">
    <!-- <ul>
      <li>reqInterceptor</li>
    </ul>
    <ul>
      
    </ul> -->

    <h2>See also</h2>
      <p>Other intercept functions: <code><a href='resInterceptor.html'>resInterceptor</a></code></p>

    


  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>